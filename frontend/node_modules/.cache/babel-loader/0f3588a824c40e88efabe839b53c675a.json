{"ast":null,"code":"var _jsxFileName = \"D:\\\\Web Development\\\\Screams-\\\\frontend\\\\src\\\\components\\\\Profile\\\\ProfileVisit.js\";\nimport React, { useEffect, useState } from 'react';\nimport axios from 'axios';\nimport Header from '../Header/Header';\nimport Sidebar from '../Sidebar/Sidebar';\nimport { Avatar, Button, Divider, makeStyles, Modal } from '@material-ui/core';\nimport './Profile.css';\nimport { useSelector } from 'react-redux';\nimport VisitorPosts from './VisitorPosts';\n\nfunction getModalStyle() {\n  const top = 50;\n  const left = 50;\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${top}%, -${left}%)`\n  };\n}\n\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    position: 'absolute',\n    maxWidth: 500,\n    maxHeight: '90vh',\n    height: 'auto',\n    objectFit: 'contain',\n    width: '90%',\n    backgroundColor: '#f9c5d1',\n    backgroundImage: 'linear-gradient(315deg, #f9c5d1 0%, #9795ef 74%)',\n    border: '4px solid rgb(176, 134, 200)',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n    overflowX: 'hidden'\n  }\n}));\n\nfunction ProfileVisit() {\n  const user = useSelector(state => state.user);\n  const [openFollower, setOpenFollower] = useState(false);\n  const [openFollowing, setOpenFollowing] = useState(false);\n  const [modalStyle] = useState(getModalStyle);\n  const classes = useStyles();\n  const [userDetails, setUserDetails] = useState('');\n  const [followed, setFollowed] = useState(false);\n  const [followersCount, setFollowersCount] = useState(0);\n  const [followers, setFollowers] = useState([]);\n  const [followingCount, setFollowingCount] = useState(0);\n  const [following, setFollowing] = useState([]);\n  const [postsCount, setPostsCount] = useState(0);\n  const [posts, setPosts] = useState([]);\n  const variable = {\n    writer: localStorage.getItem('postId')\n  };\n  useEffect(() => {\n    axios.post('/api/user/getUser', variable).then(response => {\n      if (response.data.success) {\n        setUserDetails(response.data.userDetails);\n      } else {\n        alert('Cannot Get The User Deatils');\n      }\n    });\n    axios.post('/api/follow/userFollowers', variable).then(response => {\n      if (response.data.success) {\n        setFollowersCount(response.data.followers.length);\n        setFollowers(response.data.followers);\n      } else {\n        alert('Cannot get Followers');\n      }\n    });\n    axios.post('/api/follow/userFollowing', variable).then(response => {\n      if (response.data.success) {\n        setFollowingCount(response.data.following.length);\n        setFollowing(response.data.following);\n      } else {\n        alert('Cannot get Followings');\n      }\n    });\n    axios.post('/api/post/getUserPosts', variable).then(response => {\n      if (response.data.success) {\n        setPostsCount(response.data.usersPosts.length);\n      } else {\n        alert('Server Down! Please Visit Later!');\n      }\n    });\n  }, []);\n  let followedVariable = {\n    following: localStorage.getItem('postId'),\n    follower: localStorage.getItem('userId')\n  };\n  useEffect(() => {\n    axios.post('/api/follow/followed', followedVariable).then(response => {\n      if (response.data.success) {\n        if (response.data.followed.length !== 0) {\n          setFollowed(true);\n        }\n      } else {\n        alert('Cannot Get Info!!');\n      }\n    });\n  });\n\n  const handleSubscribe = () => {\n    if (followed === true) {\n      axios.post('/api/follow/unfollow', followedVariable).then(response => {\n        if (response.data.success) {\n          setFollowersCount(followersCount - 1);\n          setFollowed(false);\n        } else {\n          alert('Unable to Unfollow');\n        }\n      });\n    } else {\n      axios.post('/api/follow/follow', followedVariable).then(response => {\n        if (response.data.success) {\n          setFollowersCount(followersCount + 1);\n          setFollowed(true);\n        } else {\n          alert('User Cannot be followed!!');\n        }\n      });\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Sidebar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile__panel\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 153,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile__panelDetails\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile__flw\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    className: \"profile__pic\",\n    src: userDetails.image,\n    alt: \"dp\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Button, {\n    className: \"flwrs\",\n    type: \"text\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 25\n    }\n  }, postsCount, \" Posts\"), /*#__PURE__*/React.createElement(Modal, {\n    open: openFollower,\n    onClose: () => setOpenFollower(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: modalStyle,\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 33\n    }\n  }, \"Followers\"), followers.map((follower, index) => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile__followers\",\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    src: follower.follower.image,\n    alt: \"user\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 41\n    }\n  }), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 41\n    }\n  }, follower.follower.firstName + ' ' + follower.follower.lastName), /*#__PURE__*/React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 41\n    }\n  }))))), /*#__PURE__*/React.createElement(Button, {\n    type: \"text\",\n    onClick: () => setOpenFollower(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 25\n    }\n  }, followersCount, \" Followers\"), /*#__PURE__*/React.createElement(Modal, {\n    open: openFollowing,\n    onClose: () => setOpenFollowing(false),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    style: modalStyle,\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 33\n    }\n  }, \"Following\"), following.map((follow, index) => /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile__followers\",\n    key: index,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    src: follow.following.image,\n    alt: \"user\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 41\n    }\n  }), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 41\n    }\n  }, follow.following.firstName + ' ' + follow.following.lastName), /*#__PURE__*/React.createElement(Divider, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 41\n    }\n  }))))), /*#__PURE__*/React.createElement(Button, {\n    type: \"text\",\n    onClick: () => setOpenFollowing(true),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 25\n    }\n  }, followingCount, \" Following\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"profile__flw\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 25\n    }\n  }, userDetails.firstName, \" \", userDetails.lastName), localStorage.getItem('userId') !== localStorage.getItem('postId') && /*#__PURE__*/React.createElement(Button, {\n    className: followed === true ? 'flw flwrs' : 'flwrs',\n    variant: \"outlined\",\n    type: \"submit\",\n    onClick: handleSubscribe,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 29\n    }\n  }, followed === true ? 'Followed' : 'Follow')), /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"profile__username\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 21\n    }\n  }, \"@\", userDetails.username), /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"profile__bio\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 21\n    }\n  }, userDetails.bio), /*#__PURE__*/React.createElement(\"h4\", {\n    className: \"profile__site\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 21\n    }\n  }, userDetails.website)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"userPosts\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(VisitorPosts, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 21\n    }\n  }))));\n}\n\nexport default ProfileVisit;","map":{"version":3,"sources":["D:/Web Development/Screams-/frontend/src/components/Profile/ProfileVisit.js"],"names":["React","useEffect","useState","axios","Header","Sidebar","Avatar","Button","Divider","makeStyles","Modal","useSelector","VisitorPosts","getModalStyle","top","left","transform","useStyles","theme","paper","position","maxWidth","maxHeight","height","objectFit","width","backgroundColor","backgroundImage","border","boxShadow","shadows","padding","spacing","overflowX","ProfileVisit","user","state","openFollower","setOpenFollower","openFollowing","setOpenFollowing","modalStyle","classes","userDetails","setUserDetails","followed","setFollowed","followersCount","setFollowersCount","followers","setFollowers","followingCount","setFollowingCount","following","setFollowing","postsCount","setPostsCount","posts","setPosts","variable","writer","localStorage","getItem","post","then","response","data","success","alert","length","usersPosts","followedVariable","follower","handleSubscribe","image","map","index","firstName","lastName","follow","username","bio","website"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport Header from '../Header/Header';\r\nimport Sidebar from '../Sidebar/Sidebar';\r\nimport { Avatar, Button, Divider, makeStyles, Modal } from '@material-ui/core';\r\nimport './Profile.css';\r\nimport { useSelector } from 'react-redux';\r\nimport VisitorPosts from './VisitorPosts';\r\n\r\nfunction getModalStyle() {\r\n    const top = 50;\r\n    const left = 50;\r\n\r\n    return {\r\n        top: `${top}%`,\r\n        left: `${left}%`,\r\n        transform: `translate(-${top}%, -${left}%)`,\r\n    };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    paper: {\r\n        position: 'absolute',\r\n        maxWidth: 500,\r\n        maxHeight: '90vh',\r\n        height: 'auto',\r\n        objectFit: 'contain',\r\n        width: '90%',\r\n        backgroundColor: '#f9c5d1',\r\n        backgroundImage: 'linear-gradient(315deg, #f9c5d1 0%, #9795ef 74%)',\r\n        border: '4px solid rgb(176, 134, 200)',\r\n        boxShadow: theme.shadows[5],\r\n        padding: theme.spacing(2, 4, 3),\r\n        overflowX: 'hidden',\r\n    },\r\n}));\r\n\r\nfunction ProfileVisit() {\r\n\r\n    const user = useSelector(state => state.user);\r\n\r\n    const [openFollower, setOpenFollower] = useState(false)\r\n    const [openFollowing, setOpenFollowing] = useState(false)\r\n    const [modalStyle] = useState(getModalStyle)\r\n    const classes = useStyles();\r\n\r\n    const [userDetails, setUserDetails] = useState('');\r\n    const [followed, setFollowed] = useState(false);\r\n    const [followersCount, setFollowersCount] = useState(0);\r\n    const [followers, setFollowers] = useState([]);\r\n    const [followingCount, setFollowingCount] = useState(0);\r\n    const [following, setFollowing] = useState([]);\r\n    const [postsCount, setPostsCount] = useState(0);\r\n    const [posts, setPosts] = useState([]);\r\n\r\n    const variable = {\r\n        writer: localStorage.getItem('postId'),\r\n    }\r\n\r\n    useEffect(() => {\r\n\r\n        axios.post('/api/user/getUser', variable)\r\n            .then(response => {\r\n                if (response.data.success) {\r\n                    setUserDetails(response.data.userDetails);\r\n                } else {\r\n                    alert('Cannot Get The User Deatils');\r\n                }\r\n            })\r\n\r\n        axios.post('/api/follow/userFollowers', variable)\r\n            .then(response => {\r\n                if (response.data.success) {\r\n                    setFollowersCount(response.data.followers.length);\r\n                    setFollowers(response.data.followers);\r\n                } else {\r\n                    alert('Cannot get Followers');\r\n                }\r\n            })\r\n\r\n        axios.post('/api/follow/userFollowing', variable)\r\n            .then(response => {\r\n                if (response.data.success) {\r\n                    setFollowingCount(response.data.following.length);\r\n                    setFollowing(response.data.following);\r\n                } else {\r\n                    alert('Cannot get Followings');\r\n                }\r\n            })\r\n\r\n        axios.post('/api/post/getUserPosts', variable)\r\n            .then(response => {\r\n                if (response.data.success) {\r\n                    setPostsCount(response.data.usersPosts.length);\r\n                } else {\r\n                    alert('Server Down! Please Visit Later!');\r\n                }\r\n            })\r\n    }, [])\r\n\r\n\r\n    let followedVariable = {\r\n        following: localStorage.getItem('postId'),\r\n        follower: localStorage.getItem('userId'),\r\n    }\r\n\r\n    useEffect(() => {\r\n\r\n        axios.post('/api/follow/followed', followedVariable)\r\n            .then(response => {\r\n                if (response.data.success) {\r\n                    if (response.data.followed.length !== 0) {\r\n                        setFollowed(true);\r\n                    }\r\n                } else {\r\n                    alert('Cannot Get Info!!');\r\n                }\r\n            })\r\n    })\r\n\r\n    const handleSubscribe = () => {\r\n\r\n        if (followed === true) {\r\n            axios.post('/api/follow/unfollow', followedVariable)\r\n                .then(response => {\r\n                    if (response.data.success) {\r\n                        setFollowersCount(followersCount - 1);\r\n                        setFollowed(false);\r\n                    } else {\r\n                        alert('Unable to Unfollow');\r\n                    }\r\n                })\r\n        } else {\r\n            axios.post('/api/follow/follow', followedVariable)\r\n                .then(response => {\r\n                    if (response.data.success) {\r\n                        setFollowersCount(followersCount + 1);\r\n                        setFollowed(true);\r\n                    } else {\r\n                        alert('User Cannot be followed!!');\r\n                    }\r\n                })\r\n        }\r\n    }\r\n\r\n\r\n    return (\r\n        <div>\r\n            <Header />\r\n\r\n            <Sidebar />\r\n\r\n            <div className='profile__panel'>\r\n                <div className='profile__panelDetails'>\r\n                    <div className='profile__flw'>\r\n                        <Avatar className='profile__pic' src={userDetails.image} alt='dp' />\r\n                        <Button className='flwrs' type='text'>{postsCount} Posts</Button>\r\n                        <Modal open={openFollower} onClose={() => setOpenFollower(false)}>\r\n                            <div style={modalStyle} className={classes.paper}>\r\n                                <h3>Followers</h3>\r\n                                {followers.map((follower, index) => (\r\n                                    <div className='profile__followers' key={index}>\r\n                                        <Avatar src={follower.follower.image} alt='user' />\r\n                                        <h4>{follower.follower.firstName + ' ' + follower.follower.lastName}</h4>\r\n                                        <Divider />\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </Modal>\r\n                        <Button type='text' onClick={() => setOpenFollower(true)}>{followersCount} Followers</Button>\r\n\r\n                        <Modal open={openFollowing} onClose={() => setOpenFollowing(false)}>\r\n                            <div style={modalStyle} className={classes.paper}>\r\n                                <h3>Following</h3>\r\n                                {following.map((follow, index) => (\r\n                                    <div className='profile__followers' key={index}>\r\n                                        <Avatar src={follow.following.image} alt='user' />\r\n                                        <h4>{follow.following.firstName + ' ' + follow.following.lastName}</h4>\r\n                                        <Divider />\r\n                                    </div>\r\n                                ))}\r\n                            </div>\r\n                        </Modal>\r\n                        <Button type='text' onClick={() => setOpenFollowing(true)}>{followingCount} Following</Button>\r\n                    </div>\r\n                    <div className='profile__flw'>\r\n                        <h3>{userDetails.firstName} {userDetails.lastName}</h3>\r\n                        {localStorage.getItem('userId') !== localStorage.getItem('postId') &&\r\n                            <Button className={followed === true ? 'flw flwrs' : 'flwrs'}\r\n                                variant='outlined'\r\n                                type='submit'\r\n                                onClick={handleSubscribe}>\r\n                                {followed === true ? 'Followed' : 'Follow'}\r\n                            </Button>\r\n                        }\r\n                    </div>\r\n                    <h4 className='profile__username'>@{userDetails.username}</h4>\r\n                    <h4 className='profile__bio'>{userDetails.bio}</h4>\r\n                    <h4 className='profile__site'>{userDetails.website}</h4>\r\n                </div>\r\n\r\n                <div className='userPosts'>\r\n                    <VisitorPosts />\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n\r\n}\r\n\r\nexport default ProfileVisit\r\n"]},"metadata":{},"sourceType":"module"}