{"ast":null,"code":"var _jsxFileName = \"D:\\\\Web Development\\\\MERN\\\\Screams-\\\\frontend\\\\src\\\\hoc\\\\auth.js\";\nimport React, { useEffect } from 'react';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { auth } from '../_actions/user_action';\nexport default function (ComposedClass, reload, adminRoute = null) {\n  function AuthenticationCheck(props) {\n    let user = useSelector(state => state.user);\n    const dispatch = useDispatch();\n    useEffect(() => {\n      dispatch(auth()).then(async response => {\n        if (await !response.payload.isAuth) {\n          if (reload) {\n            props.history.push('/');\n          }\n        } else {\n          if (adminRoute && !response.payload.isAdmin) {\n            props.history.push('/home');\n          } else {\n            if (reload === false) {\n              props.history.push('/home');\n            }\n          }\n        }\n      });\n    }, [dispatch, props.history, user.googleAuth]);\n    return /*#__PURE__*/React.createElement(ComposedClass, Object.assign({}, props, {\n      user: user,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 29,\n        columnNumber: 13\n      }\n    }));\n  }\n\n  return AuthenticationCheck;\n}","map":{"version":3,"sources":["D:/Web Development/MERN/Screams-/frontend/src/hoc/auth.js"],"names":["React","useEffect","useSelector","useDispatch","auth","ComposedClass","reload","adminRoute","AuthenticationCheck","props","user","state","dispatch","then","response","payload","isAuth","history","push","isAdmin","googleAuth"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SAASC,IAAT,QAAqB,yBAArB;AAEA,eAAe,UAAUC,aAAV,EAAyBC,MAAzB,EAAiCC,UAAU,GAAG,IAA9C,EAAoD;AAC/D,WAASC,mBAAT,CAA6BC,KAA7B,EAAoC;AAChC,QAAIC,IAAI,GAAGR,WAAW,CAACS,KAAK,IAAIA,KAAK,CAACD,IAAhB,CAAtB;AACA,UAAME,QAAQ,GAAGT,WAAW,EAA5B;AAEAF,IAAAA,SAAS,CAAC,MAAM;AACZW,MAAAA,QAAQ,CAACR,IAAI,EAAL,CAAR,CAAiBS,IAAjB,CAAsB,MAAMC,QAAN,IAAkB;AACpC,YAAI,MAAM,CAACA,QAAQ,CAACC,OAAT,CAAiBC,MAA5B,EAAoC;AAChC,cAAIV,MAAJ,EAAY;AACRG,YAAAA,KAAK,CAACQ,OAAN,CAAcC,IAAd,CAAmB,GAAnB;AACH;AACJ,SAJD,MAIO;AACH,cAAIX,UAAU,IAAI,CAACO,QAAQ,CAACC,OAAT,CAAiBI,OAApC,EAA6C;AACzCV,YAAAA,KAAK,CAACQ,OAAN,CAAcC,IAAd,CAAmB,OAAnB;AACH,WAFD,MAEO;AACH,gBAAIZ,MAAM,KAAK,KAAf,EAAsB;AAClBG,cAAAA,KAAK,CAACQ,OAAN,CAAcC,IAAd,CAAmB,OAAnB;AACH;AACJ;AACJ;AACJ,OAdD;AAeH,KAhBQ,EAgBN,CAACN,QAAD,EAAWH,KAAK,CAACQ,OAAjB,EAA0BP,IAAI,CAACU,UAA/B,CAhBM,CAAT;AAkBA,wBACI,oBAAC,aAAD,oBAAmBX,KAAnB;AAA0B,MAAA,IAAI,EAAEC,IAAhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OADJ;AAGH;;AACD,SAAOF,mBAAP;AAEH","sourcesContent":["import React, { useEffect } from 'react';\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { auth } from '../_actions/user_action';\r\n\r\nexport default function (ComposedClass, reload, adminRoute = null) {\r\n    function AuthenticationCheck(props) {\r\n        let user = useSelector(state => state.user);\r\n        const dispatch = useDispatch();\r\n\r\n        useEffect(() => {\r\n            dispatch(auth()).then(async response => {\r\n                if (await !response.payload.isAuth) {\r\n                    if (reload) {\r\n                        props.history.push('/')\r\n                    }\r\n                } else {\r\n                    if (adminRoute && !response.payload.isAdmin) {\r\n                        props.history.push('/home')\r\n                    } else {\r\n                        if (reload === false) {\r\n                            props.history.push('/home')\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n        }, [dispatch, props.history, user.googleAuth])\r\n\r\n        return (\r\n            <ComposedClass {...props} user={user} />\r\n        )\r\n    }\r\n    return AuthenticationCheck\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module"}