{"ast":null,"code":"var _jsxFileName = \"D:\\\\Web Development\\\\Screams-\\\\frontend\\\\src\\\\components\\\\Post\\\\Trending.js\";\nimport React, { useEffect, useState } from 'react';\nimport moment from 'moment';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport Header from '../Header/Header';\nimport Sidebar from '../Sidebar/Sidebar';\nimport CommentsModal from './CommentsModal';\nimport Carousel from 'react-material-ui-carousel';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport FavoriteBorderRoundedIcon from '@material-ui/icons/FavoriteBorderRounded';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport AddCommentIcon from '@material-ui/icons/AddComment';\nimport PollIcon from '@material-ui/icons/Poll';\nimport SendIcon from '@material-ui/icons/Send';\nimport { makeStyles, Modal, Avatar, IconButton, Divider } from '@material-ui/core';\nimport './Post.css';\n\nfunction getModalStyle() {\n  const top = 50;\n  const left = 50;\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${top}%, -${left}%)`\n  };\n}\n\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    position: 'absolute',\n    maxWidth: 500,\n    maxHeight: '90vh',\n    height: 'auto',\n    objectFit: 'contain',\n    width: '90%',\n    backgroundColor: '#f9c5d1',\n    backgroundImage: 'linear-gradient(315deg, #f9c5d1 0%, #9795ef 74%)',\n    border: '4px solid rgb(176, 134, 200)',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n    overflowX: 'hidden'\n  }\n}));\n\nfunction Trending(props) {\n  const user = useSelector(state => state.user);\n  const writer = user.userData && user.userData._id;\n  const [open, setOpen] = useState(false);\n  const [modalStyle] = React.useState(getModalStyle);\n  const classes = useStyles();\n  const [posts, setPosts] = useState([]);\n  const [comments, setComments] = useState([]);\n  const [postID, setPostID] = useState('');\n  const [likes, setLikes] = useState('');\n  const [commentNum, setCommentNum] = useState('');\n  useEffect(() => {\n    axios.get('/api/post/getPosts').then(response => {\n      if (response.data.success) {\n        setPosts(response.data.posts);\n      } else {\n        alert('Server Down! Please Visit Later!');\n      }\n    });\n  }, []);\n  let postId = '';\n\n  const handleOpen = id => {\n    setOpen(true);\n    postId = id;\n    setPostID(postId);\n    let variable = {\n      postId: postId\n    };\n    axios.post('/api/comment/getComment', variable).then(response => {\n      if (response.data.success) {\n        setComments(response.data.comments);\n      } else {\n        alert('Unable to fetch comment!');\n      }\n    });\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n    setComments('');\n  };\n\n  const updateComments = comment => {\n    setComments(comments.concat(comment));\n  };\n\n  let postIdForLike = '';\n\n  const handleLike = id => {\n    postIdForLike = id;\n    console.log(postIdForLike);\n    let variable = {\n      postId: postIdForLike,\n      writer: user.userData && user.userData._id\n    };\n    axios.put('/api/post/postLike', variable).then(response => {\n      if (response.data.success) {\n        setLikes(likes + 1);\n      } else {\n        alert('Cannot Like This Post!!');\n      }\n    });\n  };\n\n  const handleDislike = id => {\n    postIdForLike = id;\n    console.log(postIdForLike);\n    let variable = {\n      postId: postIdForLike,\n      writer: user.userData && user.userData._id\n    };\n    axios.put('/api/post/deleteLike', variable).then(response => {\n      if (response.data.success) {\n        setLikes(likes - 1);\n      } else {\n        alert('Cannot Like This Post!!');\n      }\n    });\n  };\n\n  let postIdForVisit = '';\n\n  const savePostId = id => {\n    postIdForVisit = id;\n    window.localStorage.setItem('postId', postIdForVisit);\n  };\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"trending\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Header, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(Sidebar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 13\n    }\n  }, \"Trending\"), /*#__PURE__*/React.createElement(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"hr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"trending__posts\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 13\n    }\n  }, posts.map((post, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index,\n    className: \"post\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post__header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: `/profile/${localStorage.getItem('postId')}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    className: \"post__profilePic\",\n    src: post.writer.image,\n    alt: post.writer.username,\n    onClick: () => {\n      savePostId(post.writer._id);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"h4\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 29\n    }\n  }, post.writer.firstName + ' ' + post.writer.lastName), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 29\n    }\n  }, \"\\xB7 @\", post.writer.username), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 29\n    }\n  }, \"\\xB7 \", moment(post.createdAt).format('MMM Do YY')), user.userData && user.userData._id === post.writer._id && /*#__PURE__*/React.createElement(DeleteIcon, {\n    className: \"post__delete\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(Link, {\n    to: `/scream/${post._id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post__caption\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 33\n    }\n  }, post.caption))), post.images[0] && /*#__PURE__*/React.createElement(Carousel, {\n    autoplay: false,\n    className: \"post__image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 29\n    }\n  }, post.images.map((image, index) => /*#__PURE__*/React.createElement(Link, {\n    key: index,\n    to: `/scream/${post._id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 37\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"post__img\",\n    src: `http://localhost:5000/${image}`,\n    alt: \"images\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 41\n    }\n  })))), post.video && /*#__PURE__*/React.createElement(Link, {\n    to: `/scream/${post._id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"video\", {\n    className: \"post__img\",\n    controls: true,\n    src: `http://localhost:5000/${post.video}`,\n    alt: \"videos\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 33\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post__reaction\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post__reactionBtns\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 29\n    }\n  }, !post.likes.includes(writer) ? /*#__PURE__*/React.createElement(IconButton, {\n    className: \"post__reactionBtn\",\n    onClick: () => {\n      handleLike(post._id);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(FavoriteBorderRoundedIcon, {\n    fontSize: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 45\n    }\n  })) : /*#__PURE__*/React.createElement(IconButton, {\n    className: \"post__reactionBtn\",\n    onClick: () => {\n      handleDislike(post._id);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(FavoriteIcon, {\n    fontSize: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 45\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post__reactionBtns\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Modal, {\n    open: open,\n    onClose: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 33\n    }\n  }, comments ? /*#__PURE__*/React.createElement(\"div\", {\n    style: modalStyle,\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 41\n    }\n  }, /*#__PURE__*/React.createElement(CommentsModal, {\n    refreshFunction: updateComments,\n    comments: comments,\n    postId: postID,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 45\n    }\n  })) : /*#__PURE__*/React.createElement(\"div\", {\n    style: modalStyle,\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 45\n    }\n  }, \"Loading.....\")), /*#__PURE__*/React.createElement(IconButton, {\n    className: \"post__reactionBtn\",\n    onClick: () => {\n      handleOpen(post._id);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(AddCommentIcon, {\n    fontSize: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 37\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post__reactionBtns\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    className: \"post__reactionBtn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(PollIcon, {\n    fontSize: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 37\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post__reactionBtns\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 238,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    className: \"post__reactionBtn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(SendIcon, {\n    fontSize: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 240,\n      columnNumber: 37\n    }\n  }))))))));\n}\n\nexport default Trending;","map":{"version":3,"sources":["D:/Web Development/Screams-/frontend/src/components/Post/Trending.js"],"names":["React","useEffect","useState","moment","axios","Link","useSelector","Header","Sidebar","CommentsModal","Carousel","DeleteIcon","FavoriteBorderRoundedIcon","FavoriteIcon","AddCommentIcon","PollIcon","SendIcon","makeStyles","Modal","Avatar","IconButton","Divider","getModalStyle","top","left","transform","useStyles","theme","paper","position","maxWidth","maxHeight","height","objectFit","width","backgroundColor","backgroundImage","border","boxShadow","shadows","padding","spacing","overflowX","Trending","props","user","state","writer","userData","_id","open","setOpen","modalStyle","classes","posts","setPosts","comments","setComments","postID","setPostID","likes","setLikes","commentNum","setCommentNum","get","then","response","data","success","alert","postId","handleOpen","id","variable","post","handleClose","updateComments","comment","concat","postIdForLike","handleLike","console","log","put","handleDislike","postIdForVisit","savePostId","window","localStorage","setItem","map","index","getItem","image","username","firstName","lastName","createdAt","format","caption","images","video","includes"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport moment from 'moment';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport Header from '../Header/Header';\r\nimport Sidebar from '../Sidebar/Sidebar';\r\nimport CommentsModal from './CommentsModal';\r\nimport Carousel from 'react-material-ui-carousel';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport FavoriteBorderRoundedIcon from '@material-ui/icons/FavoriteBorderRounded';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport AddCommentIcon from '@material-ui/icons/AddComment';\r\nimport PollIcon from '@material-ui/icons/Poll';\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport { makeStyles, Modal, Avatar, IconButton, Divider } from '@material-ui/core';\r\nimport './Post.css';\r\n\r\nfunction getModalStyle() {\r\n    const top = 50;\r\n    const left = 50;\r\n\r\n    return {\r\n        top: `${top}%`,\r\n        left: `${left}%`,\r\n        transform: `translate(-${top}%, -${left}%)`,\r\n    };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    paper: {\r\n        position: 'absolute',\r\n        maxWidth: 500,\r\n        maxHeight: '90vh',\r\n        height: 'auto',\r\n        objectFit: 'contain',\r\n        width: '90%',\r\n        backgroundColor: '#f9c5d1',\r\n        backgroundImage: 'linear-gradient(315deg, #f9c5d1 0%, #9795ef 74%)',\r\n        border: '4px solid rgb(176, 134, 200)',\r\n        boxShadow: theme.shadows[5],\r\n        padding: theme.spacing(2, 4, 3),\r\n        overflowX: 'hidden',\r\n    },\r\n}));\r\n\r\nfunction Trending(props) {\r\n    const user = useSelector(state => state.user);\r\n    const writer = user.userData && user.userData._id;\r\n\r\n    const [open, setOpen] = useState(false)\r\n    const [modalStyle] = React.useState(getModalStyle)\r\n    const classes = useStyles();\r\n\r\n    const [posts, setPosts] = useState([]);\r\n    const [comments, setComments] = useState([]);\r\n    const [postID, setPostID] = useState('');\r\n    const [likes, setLikes] = useState('');\r\n    const [commentNum, setCommentNum] = useState('');\r\n\r\n    useEffect(() => {\r\n\r\n        axios.get('/api/post/getPosts')\r\n            .then(response => {\r\n                if (response.data.success) {\r\n                    setPosts(response.data.posts);\r\n                } else {\r\n                    alert('Server Down! Please Visit Later!')\r\n                }\r\n            })\r\n    }, [])\r\n\r\n    let postId = '';\r\n\r\n    const handleOpen = (id) => {\r\n        setOpen(true);\r\n        postId = id;\r\n        setPostID(postId);\r\n\r\n        let variable = {\r\n            postId: postId\r\n        }\r\n\r\n        axios.post('/api/comment/getComment', variable)\r\n            .then(response => {\r\n                if (response.data.success) {\r\n                    setComments(response.data.comments);\r\n                } else {\r\n                    alert('Unable to fetch comment!');\r\n                }\r\n            })\r\n    }\r\n\r\n    const handleClose = () => {\r\n        setOpen(false);\r\n        setComments('');\r\n    }\r\n\r\n    const updateComments = (comment) => {\r\n        setComments(comments.concat(comment));\r\n    }\r\n\r\n\r\n\r\n    let postIdForLike = '';\r\n\r\n    const handleLike = (id) => {\r\n        postIdForLike = id;\r\n        console.log(postIdForLike);\r\n\r\n        let variable = {\r\n            postId: postIdForLike,\r\n            writer: user.userData && user.userData._id,\r\n        }\r\n\r\n        axios.put('/api/post/postLike', variable)\r\n            .then(response => {\r\n                if (response.data.success) {\r\n                    setLikes(likes + 1);\r\n                } else {\r\n                    alert('Cannot Like This Post!!');\r\n                }\r\n            })\r\n    }\r\n\r\n    const handleDislike = (id) => {\r\n        postIdForLike = id;\r\n        console.log(postIdForLike);\r\n\r\n        let variable = {\r\n            postId: postIdForLike,\r\n            writer: user.userData && user.userData._id,\r\n        }\r\n\r\n        axios.put('/api/post/deleteLike', variable)\r\n            .then(response => {\r\n                if (response.data.success) {\r\n                    setLikes(likes - 1);\r\n                } else {\r\n                    alert('Cannot Like This Post!!');\r\n                }\r\n            })\r\n    }\r\n\r\n    let postIdForVisit = '';\r\n\r\n    const savePostId = (id) => {\r\n        postIdForVisit = id;\r\n        window.localStorage.setItem('postId', postIdForVisit);\r\n    }\r\n\r\n\r\n    return (\r\n        <div className='trending'>\r\n\r\n            <Header />\r\n            <Sidebar />\r\n\r\n            <h4>Trending</h4>\r\n            <br />\r\n            <hr />\r\n\r\n            <div className='trending__posts'>\r\n                {posts.map((post, index) => (\r\n                    <div key={index} className='post'>\r\n                        <div className='post__header'>\r\n                            <Link to={`/profile/${localStorage.getItem('postId')}`}>\r\n                                <Avatar className='post__profilePic' src={post.writer.image} alt={post.writer.username} onClick={() => { savePostId(post.writer._id) }} />\r\n                            </Link>\r\n                            <h4>{post.writer.firstName + ' ' + post.writer.lastName}</h4>\r\n                            <span>· @{post.writer.username}</span>\r\n                            <span>· {moment(post.createdAt).format('MMM Do YY')}</span>\r\n                            {user.userData && user.userData._id === post.writer._id &&\r\n                                <DeleteIcon className='post__delete' />\r\n                            }\r\n                        </div>\r\n                        <Link to={`/scream/${post._id}`}>\r\n                            <div className='post__caption'>\r\n                                <p>{post.caption}</p>\r\n                            </div>\r\n                        </Link>\r\n\r\n                        {post.images[0] &&\r\n                            <Carousel autoplay={false} className='post__image'>\r\n                                {post.images.map((image, index) => (\r\n                                    <Link key={index} to={`/scream/${post._id}`}>\r\n                                        <img className='post__img' src={`http://localhost:5000/${image}`} alt='images' />\r\n                                    </Link>\r\n                                ))}\r\n                            </Carousel>\r\n                        }\r\n\r\n                        {post.video &&\r\n                            <Link to={`/scream/${post._id}`}>\r\n                                <video className='post__img' controls src={`http://localhost:5000/${post.video}`} alt='videos' />\r\n                            </Link>\r\n                        }\r\n                        <div className='post__reaction'>\r\n                            <div className='post__reactionBtns'>\r\n                                {!post.likes.includes(writer) ?\r\n                                    (\r\n                                        <IconButton className='post__reactionBtn' onClick={() => { handleLike(post._id) }}>\r\n                                            <FavoriteBorderRoundedIcon fontSize='small' />\r\n                                        </IconButton>\r\n                                    ) : (\r\n                                        <IconButton className='post__reactionBtn' onClick={() => { handleDislike(post._id) }}>\r\n                                            <FavoriteIcon fontSize='small' />\r\n                                        </IconButton>\r\n                                    )\r\n                                }\r\n                            </div>\r\n                            <div className='post__reactionBtns'>\r\n                                <Modal open={open} onClose={handleClose}>\r\n                                    {comments ? (\r\n                                        <div style={modalStyle} className={classes.paper}>\r\n                                            <CommentsModal\r\n                                                refreshFunction={updateComments}\r\n                                                comments={comments}\r\n                                                postId={postID}\r\n                                            />\r\n                                        </div>\r\n                                    ) : (\r\n                                            <div style={modalStyle} className={classes.paper}>\r\n                                                Loading.....\r\n                                            </div>\r\n                                        )\r\n                                    }\r\n                                </Modal>\r\n                                <IconButton className='post__reactionBtn' onClick={() => { handleOpen(post._id) }}>\r\n                                    <AddCommentIcon fontSize='small' />\r\n                                </IconButton>\r\n                            </div>\r\n                            <div className='post__reactionBtns'>\r\n                                <IconButton className='post__reactionBtn' >\r\n                                    <PollIcon fontSize='small' />\r\n                                </IconButton>\r\n                            </div>\r\n                            <div className='post__reactionBtns'>\r\n                                <IconButton className='post__reactionBtn' >\r\n                                    <SendIcon fontSize='small' />\r\n                                </IconButton>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Trending\r\n"]},"metadata":{},"sourceType":"module"}