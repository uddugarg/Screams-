{"ast":null,"code":"var _jsxFileName = \"D:\\\\Web Development\\\\Screams-\\\\frontend\\\\src\\\\components\\\\Profile\\\\UserPosts.js\";\nimport React, { useEffect, useState } from 'react';\nimport moment from 'moment';\nimport axios from 'axios';\nimport { Link } from 'react-router-dom';\nimport { useSelector } from 'react-redux';\nimport CommentsModal from '../Post/CommentsModal';\nimport Carousel from 'react-material-ui-carousel';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport FavoriteBorderRoundedIcon from '@material-ui/icons/FavoriteBorderRounded';\nimport FavoriteIcon from '@material-ui/icons/Favorite';\nimport AddCommentIcon from '@material-ui/icons/AddComment';\nimport PollIcon from '@material-ui/icons/Poll';\nimport SendIcon from '@material-ui/icons/Send';\nimport { makeStyles, Modal, Avatar, IconButton } from '@material-ui/core';\nimport '../Post/Post.css';\n\nfunction getModalStyle() {\n  const top = 50;\n  const left = 50;\n  return {\n    top: `${top}%`,\n    left: `${left}%`,\n    transform: `translate(-${top}%, -${left}%)`\n  };\n}\n\nconst useStyles = makeStyles(theme => ({\n  paper: {\n    position: 'absolute',\n    maxWidth: 500,\n    maxHeight: '90vh',\n    height: 'auto',\n    objectFit: 'contain',\n    width: '90%',\n    backgroundColor: '#f9c5d1',\n    backgroundImage: 'linear-gradient(315deg, #f9c5d1 0%, #9795ef 74%)',\n    border: '4px solid rgb(176, 134, 200)',\n    boxShadow: theme.shadows[5],\n    padding: theme.spacing(2, 4, 3),\n    overflowX: 'hidden'\n  }\n}));\n\nfunction UserPosts(props) {\n  const user = useSelector(state => state.user);\n  const writer = user.userData && user.userData._id;\n  const [open, setOpen] = useState(false);\n  const [modalStyle] = React.useState(getModalStyle);\n  const classes = useStyles();\n  const [posts, setPosts] = useState([]);\n  const [comments, setComments] = useState([]);\n  const [postID, setPostID] = useState('');\n  const [likes, setLikes] = useState('');\n  useEffect(() => {\n    let variable = {\n      writer: localStorage.getItem('userId')\n    };\n    axios.post('/api/post/getUserPosts', variable).then(response => {\n      if (response.data.success) {\n        setPosts(response.data.usersPosts);\n      } else {\n        alert('Server Down! Please Visit Later!');\n      }\n    });\n  }, []);\n  let postId = '';\n\n  const handleOpen = id => {\n    setOpen(true);\n    postId = id;\n    setPostID(postId);\n    let variable = {\n      postId: postId\n    };\n    axios.post('/api/comment/getComment', variable).then(response => {\n      if (response.data.success) {\n        setComments(response.data.comments);\n      } else {\n        alert('Unable to fetch comment!');\n      }\n    });\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n    setComments('');\n  };\n\n  const updateComments = comment => {\n    setComments(comments.concat(comment));\n  };\n\n  let postIdForLike = '';\n\n  const handleLike = id => {\n    postIdForLike = id;\n    console.log(postIdForLike);\n    let variable = {\n      postId: postIdForLike,\n      writer: user.userData && user.userData._id\n    };\n    axios.put('/api/post/postLike', variable).then(response => {\n      if (response.data.success) {\n        setLikes(likes + 1);\n      } else {\n        alert('Cannot Like This Post!!');\n      }\n    });\n  };\n\n  const handleDislike = id => {\n    postIdForLike = id;\n    console.log(postIdForLike);\n    let variable = {\n      postId: postIdForLike,\n      writer: user.userData && user.userData._id\n    };\n    axios.put('/api/post/deleteLike', variable).then(response => {\n      if (response.data.success) {\n        setLikes(likes - 1);\n      } else {\n        alert('Cannot Like This Post!!');\n      }\n    });\n  };\n\n  let postIdForVisit = '';\n\n  const savePostId = id => {\n    postIdForVisit = id;\n    window.localStorage.setItem('postId', postIdForVisit);\n  };\n\n  const renderUsersPosts = posts.map((post, index) => /*#__PURE__*/React.createElement(\"div\", {\n    key: index,\n    className: \"post\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post__header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Avatar, {\n    className: \"post__profilePic\",\n    src: post.writer.image,\n    alt: post.writer.username,\n    onClick: () => {\n      savePostId(post.writer._id);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"h4\", {\n    onClick: () => {\n      savePostId(post.writer._id);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 21\n    }\n  }, post.writer.firstName + ' ' + post.writer.lastName), /*#__PURE__*/React.createElement(\"span\", {\n    onClick: () => {\n      savePostId(post.writer._id);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 21\n    }\n  }, \"\\xB7 @\", post.writer.username), /*#__PURE__*/React.createElement(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 21\n    }\n  }, \"\\xB7 \", moment(post.createdAt).format('MMM Do YY')), user.userData && user.userData._id === post.writer._id && /*#__PURE__*/React.createElement(DeleteIcon, {\n    className: \"post__delete\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(Link, {\n    to: `/scream/${post._id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post__caption\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 25\n    }\n  }, post.caption))), post.images[0] && /*#__PURE__*/React.createElement(Carousel, {\n    autoplay: false,\n    className: \"post__image\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 21\n    }\n  }, post.images.map((image, index) => /*#__PURE__*/React.createElement(Link, {\n    key: index,\n    to: `/scream/${post._id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(\"img\", {\n    className: \"post__img\",\n    src: `http://localhost:5000/${image}`,\n    alt: \"images\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 33\n    }\n  })))), post.video && /*#__PURE__*/React.createElement(Link, {\n    to: `/scream/${post._id}`,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"video\", {\n    className: \"post__img\",\n    controls: true,\n    src: `http://localhost:5000/${post.video}`,\n    alt: \"videos\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 25\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post__reaction\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post__reactionBtns\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 21\n    }\n  }, !post.likes.includes(writer) ? /*#__PURE__*/React.createElement(IconButton, {\n    className: \"post__reactionBtn\",\n    onClick: () => {\n      handleLike(post._id);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(FavoriteBorderRoundedIcon, {\n    fontSize: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 37\n    }\n  })) : /*#__PURE__*/React.createElement(IconButton, {\n    className: \"post__reactionBtn\",\n    onClick: () => {\n      handleDislike(post._id);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(FavoriteIcon, {\n    fontSize: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 37\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post__reactionBtns\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Modal, {\n    open: open,\n    onClose: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 25\n    }\n  }, comments ? /*#__PURE__*/React.createElement(\"div\", {\n    style: modalStyle,\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 203,\n      columnNumber: 33\n    }\n  }, /*#__PURE__*/React.createElement(CommentsModal, {\n    refreshFunction: updateComments,\n    comments: comments,\n    postId: postID,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 37\n    }\n  })) : /*#__PURE__*/React.createElement(\"div\", {\n    style: modalStyle,\n    className: classes.paper,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 37\n    }\n  }, \"Loading.....\")), /*#__PURE__*/React.createElement(IconButton, {\n    className: \"post__reactionBtn\",\n    onClick: () => {\n      handleOpen(post._id);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 217,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(AddCommentIcon, {\n    fontSize: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post__reactionBtns\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    className: \"post__reactionBtn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(PollIcon, {\n    fontSize: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 29\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"post__reactionBtns\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 226,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(IconButton, {\n    className: \"post__reactionBtn\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 227,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(SendIcon, {\n    fontSize: \"small\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 29\n    }\n  }))))));\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"posts\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 9\n    }\n  }, renderUsersPosts);\n}\n\nexport default UserPosts;","map":{"version":3,"sources":["D:/Web Development/Screams-/frontend/src/components/Profile/UserPosts.js"],"names":["React","useEffect","useState","moment","axios","Link","useSelector","CommentsModal","Carousel","DeleteIcon","FavoriteBorderRoundedIcon","FavoriteIcon","AddCommentIcon","PollIcon","SendIcon","makeStyles","Modal","Avatar","IconButton","getModalStyle","top","left","transform","useStyles","theme","paper","position","maxWidth","maxHeight","height","objectFit","width","backgroundColor","backgroundImage","border","boxShadow","shadows","padding","spacing","overflowX","UserPosts","props","user","state","writer","userData","_id","open","setOpen","modalStyle","classes","posts","setPosts","comments","setComments","postID","setPostID","likes","setLikes","variable","localStorage","getItem","post","then","response","data","success","usersPosts","alert","postId","handleOpen","id","handleClose","updateComments","comment","concat","postIdForLike","handleLike","console","log","put","handleDislike","postIdForVisit","savePostId","window","setItem","renderUsersPosts","map","index","image","username","firstName","lastName","createdAt","format","caption","images","video","includes"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport moment from 'moment';\r\nimport axios from 'axios';\r\nimport { Link } from 'react-router-dom';\r\nimport { useSelector } from 'react-redux';\r\nimport CommentsModal from '../Post/CommentsModal';\r\nimport Carousel from 'react-material-ui-carousel';\r\nimport DeleteIcon from '@material-ui/icons/Delete';\r\nimport FavoriteBorderRoundedIcon from '@material-ui/icons/FavoriteBorderRounded';\r\nimport FavoriteIcon from '@material-ui/icons/Favorite';\r\nimport AddCommentIcon from '@material-ui/icons/AddComment';\r\nimport PollIcon from '@material-ui/icons/Poll';\r\nimport SendIcon from '@material-ui/icons/Send';\r\nimport { makeStyles, Modal, Avatar, IconButton } from '@material-ui/core';\r\nimport '../Post/Post.css';\r\n\r\nfunction getModalStyle() {\r\n    const top = 50;\r\n    const left = 50;\r\n\r\n    return {\r\n        top: `${top}%`,\r\n        left: `${left}%`,\r\n        transform: `translate(-${top}%, -${left}%)`,\r\n    };\r\n}\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n    paper: {\r\n        position: 'absolute',\r\n        maxWidth: 500,\r\n        maxHeight: '90vh',\r\n        height: 'auto',\r\n        objectFit: 'contain',\r\n        width: '90%',\r\n        backgroundColor: '#f9c5d1',\r\n        backgroundImage: 'linear-gradient(315deg, #f9c5d1 0%, #9795ef 74%)',\r\n        border: '4px solid rgb(176, 134, 200)',\r\n        boxShadow: theme.shadows[5],\r\n        padding: theme.spacing(2, 4, 3),\r\n        overflowX: 'hidden',\r\n    },\r\n}));\r\n\r\nfunction UserPosts(props) {\r\n    const user = useSelector(state => state.user);\r\n    const writer = user.userData && user.userData._id;\r\n\r\n    const [open, setOpen] = useState(false)\r\n    const [modalStyle] = React.useState(getModalStyle)\r\n    const classes = useStyles();\r\n\r\n    const [posts, setPosts] = useState([]);\r\n    const [comments, setComments] = useState([]);\r\n    const [postID, setPostID] = useState('');\r\n    const [likes, setLikes] = useState('');\r\n\r\n    useEffect(() => {\r\n\r\n        let variable = {\r\n            writer: localStorage.getItem('userId'),\r\n        }\r\n        \r\n        axios.post('/api/post/getUserPosts', variable)\r\n            .then(response => {\r\n                if (response.data.success) {\r\n                    setPosts(response.data.usersPosts);\r\n                } else {\r\n                    alert('Server Down! Please Visit Later!')\r\n                }\r\n            })\r\n    }, [])\r\n\r\n    let postId = '';\r\n\r\n    const handleOpen = (id) => {\r\n        setOpen(true);\r\n        postId = id;\r\n        setPostID(postId);\r\n\r\n        let variable = {\r\n            postId: postId\r\n        }\r\n\r\n        axios.post('/api/comment/getComment', variable)\r\n            .then(response => {\r\n                if (response.data.success) {\r\n                    setComments(response.data.comments);\r\n                } else {\r\n                    alert('Unable to fetch comment!');\r\n                }\r\n            })\r\n    }\r\n\r\n    const handleClose = () => {\r\n        setOpen(false);\r\n        setComments('');\r\n    }\r\n\r\n    const updateComments = (comment) => {\r\n        setComments(comments.concat(comment));\r\n    }\r\n\r\n\r\n\r\n    let postIdForLike = '';\r\n\r\n    const handleLike = (id) => {\r\n        postIdForLike = id;\r\n        console.log(postIdForLike);\r\n\r\n        let variable = {\r\n            postId: postIdForLike,\r\n            writer: user.userData && user.userData._id,\r\n        }\r\n\r\n        axios.put('/api/post/postLike', variable)\r\n            .then(response => {\r\n                if (response.data.success) {\r\n                    setLikes(likes + 1);\r\n                } else {\r\n                    alert('Cannot Like This Post!!');\r\n                }\r\n            })\r\n    }\r\n\r\n    const handleDislike = (id) => {\r\n        postIdForLike = id;\r\n        console.log(postIdForLike);\r\n\r\n        let variable = {\r\n            postId: postIdForLike,\r\n            writer: user.userData && user.userData._id,\r\n        }\r\n\r\n        axios.put('/api/post/deleteLike', variable)\r\n            .then(response => {\r\n                if (response.data.success) {\r\n                    setLikes(likes - 1);\r\n                } else {\r\n                    alert('Cannot Like This Post!!');\r\n                }\r\n            })\r\n    }\r\n\r\n    let postIdForVisit = '';\r\n\r\n    const savePostId = (id) => {\r\n        postIdForVisit = id;\r\n        window.localStorage.setItem('postId', postIdForVisit);\r\n    }\r\n\r\n    const renderUsersPosts = \r\n        posts.map((post, index) => (\r\n            <div key={index} className='post'>\r\n                <div className='post__header'>\r\n                    <Avatar className='post__profilePic' src={post.writer.image} alt={post.writer.username} onClick={() => {savePostId(post.writer._id)}} />\r\n                    <h4 onClick={() => {savePostId(post.writer._id)}}>{post.writer.firstName + ' ' + post.writer.lastName}</h4>\r\n                    <span onClick={() => {savePostId(post.writer._id)}}>· @{post.writer.username}</span>\r\n                    <span>· {moment(post.createdAt).format('MMM Do YY')}</span>\r\n                    {user.userData && user.userData._id === post.writer._id &&\r\n                        <DeleteIcon className='post__delete' />\r\n                    }\r\n                </div>\r\n                <Link to={`/scream/${post._id}`}>\r\n                    <div className='post__caption'>\r\n                        <p>{post.caption}</p>\r\n                    </div>\r\n                </Link>\r\n\r\n                {post.images[0] &&\r\n                    <Carousel autoplay={false} className='post__image'>\r\n                        {post.images.map((image, index) => (\r\n                            <Link key={index} to={`/scream/${post._id}`}>\r\n                                <img className='post__img' src={`http://localhost:5000/${image}`} alt='images' />\r\n                            </Link>\r\n                        ))}\r\n                    </Carousel>\r\n                }\r\n\r\n                {post.video &&\r\n                    <Link to={`/scream/${post._id}`}>\r\n                        <video className='post__img' controls src={`http://localhost:5000/${post.video}`} alt='videos' />\r\n                    </Link>\r\n                }\r\n                <div className='post__reaction'>\r\n                    <div className='post__reactionBtns'>\r\n                        {!post.likes.includes(writer) ?\r\n                            (\r\n                                <IconButton className='post__reactionBtn' onClick={() => { handleLike(post._id) }}>\r\n                                    <FavoriteBorderRoundedIcon fontSize='small' />\r\n                                </IconButton>\r\n                            ) : (\r\n                                <IconButton className='post__reactionBtn' onClick={() => { handleDislike(post._id) }}>\r\n                                    <FavoriteIcon fontSize='small' />\r\n                                </IconButton>\r\n                            )\r\n                        }\r\n                    </div>\r\n                    <div className='post__reactionBtns'>\r\n                        <Modal open={open} onClose={handleClose}>\r\n                            {comments ? (\r\n                                <div style={modalStyle} className={classes.paper}>\r\n                                    <CommentsModal\r\n                                        refreshFunction={updateComments}\r\n                                        comments={comments}\r\n                                        postId={postID}\r\n                                    />\r\n                                </div>\r\n                            ) : (\r\n                                    <div style={modalStyle} className={classes.paper}>\r\n                                        Loading.....\r\n                                    </div>\r\n                                )\r\n                            }\r\n                        </Modal>\r\n                        <IconButton className='post__reactionBtn' onClick={() => { handleOpen(post._id) }}>\r\n                            <AddCommentIcon fontSize='small' />\r\n                        </IconButton>\r\n                    </div>\r\n                    <div className='post__reactionBtns'>\r\n                        <IconButton className='post__reactionBtn' >\r\n                            <PollIcon fontSize='small' />\r\n                        </IconButton>\r\n                    </div>\r\n                    <div className='post__reactionBtns'>\r\n                        <IconButton className='post__reactionBtn' >\r\n                            <SendIcon fontSize='small' />\r\n                        </IconButton>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        ))\r\n    \r\n\r\n\r\n\r\n    return (\r\n        <div className='posts'>\r\n            {renderUsersPosts}\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default UserPosts\r\n\r\n"]},"metadata":{},"sourceType":"module"}